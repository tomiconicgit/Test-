<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Voxel World</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#0a0a0a" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <style>
    html, body { margin:0; height:100%; overflow:hidden; background:#0b0c10; touch-action:none; }
    canvas { display:block; }
    /* HUD */
    #hud { position:fixed; inset:0; pointer-events:none; }
    .joystick {
      position: absolute; left: 24px; bottom: 24px; width: 140px; height: 140px;
      pointer-events: auto; border-radius: 50%; background: rgba(255,255,255,0.06); backdrop-filter: blur(8px);
    }
    .stick {
      position:absolute; left:50%; top:50%; width:72px; height:72px; transform:translate(-50%,-50%);
      border-radius:50%; background: rgba(255,255,255,0.18);
    }
    .btn {
      position:absolute; right:24px; bottom:24px; width:84px; height:84px; border-radius:18px;
      background: rgba(255,255,255,0.08); backdrop-filter: blur(8px);
      pointer-events:auto; display:flex; align-items:center; justify-content:center; font-family: system-ui, -apple-system, Inter, Arial, sans-serif; color:#fff; font-weight:600; user-select:none;
    }
    .btn.dig { right:124px; }
    .btn:active { background: rgba(255,255,255,0.16); }
    .block-select {
      position:absolute; right:24px; bottom:128px; pointer-events:auto; display:flex; gap:10px;
    }
    .swatch {
      width:40px; height:40px; border-radius:10px; border:2px solid rgba(255,255,255,0.2); box-shadow:0 0 0 2px transparent inset; cursor:pointer;
    }
    .swatch.active { box-shadow:0 0 0 2px #fff inset; }
    .crosshair {
      position:fixed; left:50%; top:50%; width:2px; height:2px; background:#fff; opacity:0.9; box-shadow:0 0 0 8px rgba(255,255,255,0.04);
      transform:translate(-50%,-50%); border-radius:50%;
    }
    .fps {
      position:fixed; left:12px; top:8px; color:#b8c0cc; font:12px/1.4 ui-monospace, SFMono-Regular, Menlo, monospace; opacity:.8;
      background:rgba(0,0,0,.35); padding:6px 8px; border-radius:8px; pointer-events:none;
    }
  </style>
</head>
<body>
  <div id="hud">
    <div class="joystick" id="joy"><div class="stick" id="stick"></div></div>
    <div class="btn dig" id="btn-dig">DIG</div>
    <div class="btn" id="btn-place">PLACE</div>
    <div class="block-select" id="block-select"></div>
    <div class="crosshair"></div>
    <div class="fps" id="fps">â€¦</div>
  </div>

  <!-- Three.js from CDN -->
  <script type="module">
    import * as THREE from "https://unpkg.com/three@0.160.1/build/three.module.js";
    window.THREE = THREE; // make global for modules that expect it
  </script>

  <!-- Manifest-driven loader -->
  <script type="module">
    import { FILES } from './Main.js';
    // Load all modules listed in Main.js, then boot Game.init()
    const modules = {};
    for (const path of FILES) {
      modules[path] = await import(path);
    }
    // Boot
    await modules['./src/Game.js'].Game.init({
      modules,
      assetsBase: './assets/',
      worldSize: 100,     // 100 x 100
      minY: -30,          // digging depth
      maxSky: 1000        // sky height
    });
  </script>
</body>
</html>